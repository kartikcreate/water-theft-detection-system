import pandas as pd
import matplotlib.pyplot as plt
from google.colab import files
print(" Please upload your Excel file:")
uploaded = files.upload()
for fn in uploaded.keys():
    filename = fn
df = pd.read_excel(filename)
print("\n File loaded successfully. First few rows:")
display(df.head())
plt.figure(figsize=(14,6))
plt.plot(df["Timestamp"], df["Source_Flow(L/min)"], label="Source Flow", color="blue", linewidth=2)
plt.plot(df["Timestamp"], df["End_Flow(L/min)"], label="End Flow", color="green", linewidth=2)
theft_points = df[df["Theft_Flag"] == 1]
plt.scatter(theft_points["Timestamp"], theft_points["Source_Flow(L/min)"],
            edgecolors="red", facecolors="none", s=200, linewidths=2.5, label="Theft Detected")
plt.scatter(theft_points["Timestamp"], theft_points["End_Flow(L/min)"],
            edgecolors="red", facecolors="none", s=200, linewidths=2.5)
plt.title(" Water Flow Monitoring with Theft Detection", fontsize=15, fontweight='bold')
plt.xlabel("Timestamp", fontsize=12)
plt.ylabel("Flow (L/min)", fontsize=12)
plt.legend()
plt.grid(True, linestyle="--", alpha=0.6)
plt.tight_layout()
plt.show()
